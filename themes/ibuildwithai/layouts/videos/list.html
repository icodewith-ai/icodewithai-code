{{ define "main" }}
    <main>
        <!-- Videos Hero Section -->
        <section class="hero">
            <div class="container">
                <h1><span class="highlight">Videos</span></h1>
                <p class="tagline">On-demand tutorials, talks, presentations and more.</p>
            </div>
        </section>

        <section class="section">
            <div class="container">

                {{ $videos := .Pages.ByParam "date_time" }}

                {{ if $videos }}
                <div class="event-cards">
                    {{ range $videos.Reverse }}
                        <a href="{{ .Permalink }}" class="app-card-link">
                            <article class="app-card">
                                {{ if .Params.image }}
                                    {{ $videoImgPath := strings.TrimPrefix "/" .Params.image }}
                                    {{ $videoImg := resources.Get $videoImgPath }}
                                    {{ if $videoImg }}
                                    <div class="event-card-thumbnail">
                                        {{ $videoImgFingerprint := $videoImg | resources.Fingerprint }}
                                        <img src="{{ $videoImgFingerprint.RelPermalink }}" alt="{{ .Title }}" loading="lazy">
                                    </div>
                                    {{ end }}
                                {{ end }}
                                <h3>{{ .Title }}</h3>
                                {{ if .Params.presenter }}
                                    {{ $presenterKeys := split .Params.presenter "," }}
                                    {{ $presenterNames := slice }}
                                    {{ range $presenterKeys }}
                                        {{ $key := trim . " " }}
                                        {{ $presenterData := index $.Site.Data.people $key }}
                                        {{ if $presenterData }}
                                            {{ $presenterNames = $presenterNames | append $presenterData.fullName }}
                                        {{ end }}
                                    {{ end }}
                                    {{ if $presenterNames }}
                                        <div class="post-author">Presented by
                                        {{ if eq (len $presenterNames) 1 }}
                                            {{ index $presenterNames 0 }}
                                        {{ else if eq (len $presenterNames) 2 }}
                                            {{ index $presenterNames 0 }} and {{ index $presenterNames 1 }}
                                        {{ else }}
                                            {{ $lastIndex := sub (len $presenterNames) 1 }}
                                            {{ range $i, $name := $presenterNames }}
                                                {{ if eq $i $lastIndex }}, and {{ $name }}{{ else if eq $i 0 }}{{ $name }}{{ else }}, {{ $name }}{{ end }}
                                            {{ end }}
                                        {{ end }}</div>
                                    {{ end }}
                                {{ end }}
                                <div class="app-meta">
                                    {{ dateFormat "January 2, 2006" .Params.date_time }}
                                </div>
                                <span class="card-link">Watch video â†’</span>
                            </article>
                        </a>
                    {{ end }}
                </div>
                {{ else }}
                    <div class="app-card">
                        <h3>No videos yet</h3>
                        <p>Check back soon for videos!</p>
                    </div>
                {{ end }}
            </div>
        </section>
    </main>
{{ end }}
